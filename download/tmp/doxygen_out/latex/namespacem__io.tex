\hypertarget{namespacem__io}{}\section{m\+\_\+io Module Reference}
\label{namespacem__io}\index{m\+\_\+io@{m\+\_\+io}}
\subsection*{Functions/\+Subroutines}
\begin{DoxyCompactItemize}
\item 
\hyperlink{option__stopwatch_83_8txt_abd4b21fbbd175834027b5224bfe97e66}{character}(len=\+:) function, allocatable, \hyperlink{M__stopwatch_83_8txt_a2f74811300c361e53b430611a7d1769f}{public} \hyperlink{namespacem__io_adf7b5088ef3b4daa6c064d3e264ae821}{uniq} (\hyperlink{M__stopwatch_83_8txt_a3f508a893ae4c3b397b4383e33b9bcae}{name}, istart, verbose, create)
\begin{DoxyCompactList}\small\item\em \subsubsection*{N\+A\+ME}

uniq(3f) -\/ \mbox{[}M\+\_\+io\mbox{]} append a number to the end of filename to make a unique name if name exists \subsubsection*{S\+Y\+N\+O\+P\+S\+IS}\end{DoxyCompactList}\item 
\hyperlink{M__stopwatch_83_8txt_acfbcff50169d691ff02d4a123ed70482}{subroutine}, \hyperlink{M__stopwatch_83_8txt_a2f74811300c361e53b430611a7d1769f}{public} \hyperlink{namespacem__io_aa6ee277b2e0f1c263488624b34371fcf}{print\+\_\+inquire} (iunit, \hyperlink{M__stopwatch_83_8txt_a3f508a893ae4c3b397b4383e33b9bcae}{name})
\begin{DoxyCompactList}\small\item\em \subsubsection*{N\+A\+ME}

print\+\_\+inquire(3f) -\/ \mbox{[}M\+\_\+io\mbox{]} Do I\+N\+Q\+U\+I\+RE on file by name/number and print results \subsubsection*{S\+Y\+N\+O\+P\+S\+IS}\end{DoxyCompactList}\item 
\hyperlink{M__stopwatch_83_8txt_acfbcff50169d691ff02d4a123ed70482}{subroutine}, \hyperlink{M__stopwatch_83_8txt_a2f74811300c361e53b430611a7d1769f}{public} \hyperlink{namespacem__io_ad25822cde8058cd6861e2d9a5d729ccc}{slurp} (filename, \hyperlink{README_8txt_afda9e6898bd09238e9e9be4c62ce246b}{text})
\begin{DoxyCompactList}\small\item\em \subsubsection*{N\+A\+ME}

S\+L\+U\+R\+P(3f) -\/ \mbox{[}M\+\_\+io\mbox{]} read a file into a character array \subsubsection*{S\+Y\+N\+O\+P\+S\+IS}\end{DoxyCompactList}\item 
integer function, \hyperlink{M__stopwatch_83_8txt_a2f74811300c361e53b430611a7d1769f}{public} \hyperlink{namespacem__io_a673f7f7e137424eed9c6a736901a5cbc}{notopen} (start, end, err)
\begin{DoxyCompactList}\small\item\em \subsubsection*{N\+A\+ME}

notopen(3f) -\/ \mbox{[}M\+\_\+io\mbox{]} Find a F\+U\+N/\+L\+UN (Fortran-\/unit-\/number) that is not in use \subsubsection*{S\+Y\+N\+O\+P\+S\+IS}\end{DoxyCompactList}\item 
\hyperlink{option__stopwatch_83_8txt_abd4b21fbbd175834027b5224bfe97e66}{character}(len=\+:) function, allocatable, \hyperlink{M__stopwatch_83_8txt_a2f74811300c361e53b430611a7d1769f}{public} \hyperlink{namespacem__io_a85eb6aa886ca8e591fdc837919f81708}{dirname} (filename)
\begin{DoxyCompactList}\small\item\em \subsubsection*{N\+A\+ME}

dirname(3f) -\/ \mbox{[}M\+\_\+io\mbox{]} strip last component from filename \end{DoxyCompactList}\item 
\hyperlink{M__stopwatch_83_8txt_acfbcff50169d691ff02d4a123ed70482}{subroutine}, \hyperlink{M__stopwatch_83_8txt_a2f74811300c361e53b430611a7d1769f}{public} \hyperlink{namespacem__io_a7d1857c5c839bf3e096ce68fa1447d44}{splitpath} (path, dir, \hyperlink{M__stopwatch_83_8txt_a3f508a893ae4c3b397b4383e33b9bcae}{name}, basename, ext)
\begin{DoxyCompactList}\small\item\em \subsubsection*{N\+A\+ME}

splitpath(3f) -\/ \mbox{[}M\+\_\+io\mbox{]} split a Unix pathname into components \end{DoxyCompactList}\item 
logical function, \hyperlink{M__stopwatch_83_8txt_a2f74811300c361e53b430611a7d1769f}{public} \hyperlink{namespacem__io_a6793f5adc45177098781af4be39911ff}{isdir} (\hyperlink{namespacem__io_a85eb6aa886ca8e591fdc837919f81708}{dirname})
\begin{DoxyCompactList}\small\item\em \subsubsection*{N\+A\+ME}

isdir(3f) -\/ \mbox{[}M\+\_\+io\mbox{]} checks if argument is a directory path \subsubsection*{S\+Y\+N\+T\+AX}

logical function isdir(path) \subsubsection*{D\+E\+S\+C\+R\+I\+P\+T\+I\+ON}

isdir(3f) checks if path is a path to a directory. \subsubsection*{O\+P\+T\+I\+O\+NS}

path a character string representing a directory pathname. Trailing spaces are ignored. \subsubsection*{E\+X\+A\+M\+P\+L\+ES}\end{DoxyCompactList}\item 
integer function, \hyperlink{M__stopwatch_83_8txt_a2f74811300c361e53b430611a7d1769f}{public} \hyperlink{namespacem__io_a8d9ee59e21830662fa59c300ca23e04b}{readline} (line, lun)
\begin{DoxyCompactList}\small\item\em \subsubsection*{N\+A\+ME}

readline(3f) -\/ \mbox{[}M\+\_\+io\mbox{]} read a line from specified L\+UN into allocatable string up to line length limit \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Function/\+Subroutine Documentation}
\mbox{\Hypertarget{namespacem__io_a85eb6aa886ca8e591fdc837919f81708}\label{namespacem__io_a85eb6aa886ca8e591fdc837919f81708}} 
\index{m\+\_\+io@{m\+\_\+io}!dirname@{dirname}}
\index{dirname@{dirname}!m\+\_\+io@{m\+\_\+io}}
\subsubsection{\texorpdfstring{dirname()}{dirname()}}
{\footnotesize\ttfamily \hyperlink{option__stopwatch_83_8txt_abd4b21fbbd175834027b5224bfe97e66}{character}(len=\+:) function, allocatable, \hyperlink{M__stopwatch_83_8txt_a2f74811300c361e53b430611a7d1769f}{public} m\+\_\+io\+::dirname (\begin{DoxyParamCaption}\item[{\hyperlink{option__stopwatch_83_8txt_abd4b21fbbd175834027b5224bfe97e66}{character}(len=$\ast$), intent(\hyperlink{M__journal_83_8txt_afce72651d1eed785a2132bee863b2f38}{in})}]{filename }\end{DoxyParamCaption})}



\subsubsection*{N\+A\+ME}

dirname(3f) -\/ \mbox{[}M\+\_\+io\mbox{]} strip last component from filename 

\subsubsection*{S\+Y\+N\+O\+P\+S\+IS}

\begin{DoxyVerb}function dirname(FILENAME) result (DIRECTORY)

  character(len=*),intent(in)  :: FILENAME
  character(len=:),allocatable :: DIRECTORY
\end{DoxyVerb}


\subsubsection*{D\+E\+S\+C\+R\+I\+P\+T\+I\+ON}

Output F\+I\+L\+E\+N\+A\+ME with its last non-\/slash component and trailing slashes removed. if F\+I\+L\+E\+N\+A\+ME contains no /\textquotesingle{}s, output \textquotesingle{}.\textquotesingle{} (meaning the current directory).

Assumes leaf separator is a slash (\textquotesingle{}/\textquotesingle{}) and that filename does not contain trailing spaces.

\subsubsection*{O\+P\+T\+I\+O\+NS}

F\+I\+L\+E\+N\+A\+ME pathname to remove the last leaf from

\subsubsection*{R\+E\+T\+U\+R\+NS}

D\+I\+R\+E\+C\+T\+O\+RY directory name for pathname

\subsubsection*{E\+X\+A\+M\+P\+L\+ES}

Sample program\+:

program demo\+\_\+dirname use M\+\_\+io, only \+: dirname implicit none character(len=\+:),allocatable \+:\+: filename integer \+:\+: filename\+\_\+length integer \+:\+: i ! get pathname from command line arguments do i = 1 , command\+\_\+argument\+\_\+count() call get\+\_\+command\+\_\+argument (i , length=filename\+\_\+length) allocate(character(len=filename\+\_\+length) \+:\+: filename) call get\+\_\+command\+\_\+argument (i , value=filename) write($\ast$,\textquotesingle{}(a)\textquotesingle{})dirname(filename) deallocate(filename) enddo end program demo\+\_\+dirname

Sample program executions\+:

demo\+\_\+dirname /usr/bin/ -\/$>$ \char`\"{}/usr\char`\"{} demo\+\_\+dirname dir1/str dir2/str -\/$>$ \char`\"{}dir1\char`\"{} followed by \char`\"{}dir2\char`\"{} demo\+\_\+dirname stdio.\+h -\/$>$ \char`\"{}.\char`\"{}

\subsubsection*{S\+EE A\+L\+SO}

dirname(3c), basename(3c), readlink(3c), realpath(3c) P\+R\+O\+D\+U\+CT\+: C\+LI library utilities and examples P\+R\+O\+G\+R\+AM\+: dirname(3f) D\+E\+S\+C\+R\+I\+P\+T\+I\+ON\+: strip last component from filename \subsubsection*{V\+E\+R\+S\+I\+ON\+: 1.\+0.\+0}

\subsubsection*{D\+A\+TE\+: 2015-\/06-\/26}

A\+U\+T\+H\+OR\+: John S. Urban R\+E\+P\+O\+R\+T\+I\+NG B\+U\+GS\+: \href{http://www.urbanjost.altervista.org/}{\tt http\+://www.\+urbanjost.\+altervista.\+org/} H\+O\+ME P\+A\+GE\+: \href{http://www.urbanjost.altervista.org/index.html}{\tt http\+://www.\+urbanjost.\+altervista.\+org/index.\+html} L\+I\+C\+E\+N\+SE\+: Public Domain. This is free software\+: you are free to change and redistribute it. There is NO W\+A\+R\+R\+A\+N\+TY, to the extent permitted by law. 

References removetail(), and true().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacem__io_a85eb6aa886ca8e591fdc837919f81708_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacem__io_a6793f5adc45177098781af4be39911ff}\label{namespacem__io_a6793f5adc45177098781af4be39911ff}} 
\index{m\+\_\+io@{m\+\_\+io}!isdir@{isdir}}
\index{isdir@{isdir}!m\+\_\+io@{m\+\_\+io}}
\subsubsection{\texorpdfstring{isdir()}{isdir()}}
{\footnotesize\ttfamily logical function, \hyperlink{M__stopwatch_83_8txt_a2f74811300c361e53b430611a7d1769f}{public} m\+\_\+io\+::isdir (\begin{DoxyParamCaption}\item[{\hyperlink{option__stopwatch_83_8txt_abd4b21fbbd175834027b5224bfe97e66}{character}(len=$\ast$), intent(\hyperlink{M__journal_83_8txt_afce72651d1eed785a2132bee863b2f38}{in})}]{dirname }\end{DoxyParamCaption})}



\subsubsection*{N\+A\+ME}

isdir(3f) -\/ \mbox{[}M\+\_\+io\mbox{]} checks if argument is a directory path \subsubsection*{S\+Y\+N\+T\+AX}

logical function isdir(path) \subsubsection*{D\+E\+S\+C\+R\+I\+P\+T\+I\+ON}

isdir(3f) checks if path is a path to a directory. \subsubsection*{O\+P\+T\+I\+O\+NS}

path a character string representing a directory pathname. Trailing spaces are ignored. \subsubsection*{E\+X\+A\+M\+P\+L\+ES}

Sample program\+:

program demo\+\_\+isdir Use M\+\_\+io, only \+: isdir implicit none integer \+:\+: i character(len=80),parameter \+:\+: names($\ast$)=\mbox{[} \& \textquotesingle{}/tmp \textquotesingle{}, \& \textquotesingle{}/tmp/\+N\+O\+T\+T\+H\+E\+RE \textquotesingle{}, \& \textquotesingle{}/usr/local \textquotesingle{}, \& \textquotesingle{}. \textquotesingle{}, \& \textquotesingle{}P\+R\+O\+B\+A\+B\+L\+Y\+\_\+\+N\+OT \textquotesingle{}\mbox{]} do i=1,size(names) write($\ast$,$\ast$)\textquotesingle{} is \textquotesingle{},trim(names(i)),\textquotesingle{} a directory? \textquotesingle{}, isdir(names(i)) enddo end program demo\+\_\+isdir

Results\+:

is /tmp a directory? T is /tmp/\+N\+O\+T\+T\+H\+E\+RE a directory? F is /usr/local a directory? T is . a directory? T is P\+R\+O\+B\+A\+B\+L\+Y\+\_\+\+N\+OT a directory? F 

References false(), and file().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacem__io_a6793f5adc45177098781af4be39911ff_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacem__io_a673f7f7e137424eed9c6a736901a5cbc}\label{namespacem__io_a673f7f7e137424eed9c6a736901a5cbc}} 
\index{m\+\_\+io@{m\+\_\+io}!notopen@{notopen}}
\index{notopen@{notopen}!m\+\_\+io@{m\+\_\+io}}
\subsubsection{\texorpdfstring{notopen()}{notopen()}}
{\footnotesize\ttfamily integer function, \hyperlink{M__stopwatch_83_8txt_a2f74811300c361e53b430611a7d1769f}{public} m\+\_\+io\+::notopen (\begin{DoxyParamCaption}\item[{integer, intent(\hyperlink{M__journal_83_8txt_afce72651d1eed785a2132bee863b2f38}{in}), \hyperlink{option__stopwatch_83_8txt_aa4ece75e7acf58a4843f70fe18c3ade5}{optional}}]{start,  }\item[{integer, intent(\hyperlink{M__journal_83_8txt_afce72651d1eed785a2132bee863b2f38}{in}), \hyperlink{option__stopwatch_83_8txt_aa4ece75e7acf58a4843f70fe18c3ade5}{optional}}]{end,  }\item[{integer, intent(out), \hyperlink{option__stopwatch_83_8txt_aa4ece75e7acf58a4843f70fe18c3ade5}{optional}}]{err }\end{DoxyParamCaption})}



\subsubsection*{N\+A\+ME}

notopen(3f) -\/ \mbox{[}M\+\_\+io\mbox{]} Find a F\+U\+N/\+L\+UN (Fortran-\/unit-\/number) that is not in use \subsubsection*{S\+Y\+N\+O\+P\+S\+IS}

Usage

integer function notopen(start,end,err) integer,optional,intent(in) \+:\+: start integer,optional,intent(in) \+:\+: end integer,optional,intent(out) \+:\+: err \subsubsection*{D\+E\+S\+C\+R\+I\+P\+T\+I\+ON}

A free F\+O\+R\+T\+R\+AN unit number is needed to O\+P\+EN a file. N\+O\+T\+O\+P\+E\+N() returns a F\+O\+R\+T\+R\+AN unit number from S\+T\+A\+RT to E\+ND not currently associated with an I/O unit. S\+T\+A\+RT and E\+ND are expected to be positive integers where E\+ND .ge. S\+T\+A\+RT.

If N\+O\+T\+O\+P\+E\+N() returns -\/1, then no free F\+O\+R\+T\+R\+AN unit could be found in the specified range.

Otherwise, N\+O\+T\+O\+P\+E\+N() returns an integer representing a free F\+O\+R\+T\+R\+AN logical unit number. Note that N\+O\+T\+O\+P\+E\+N() assumes the following unit numbers defined by the Fortran 2008 I\+S\+O\+\_\+\+F\+O\+R\+T\+R\+A\+N\+\_\+\+E\+NV module

E\+R\+R\+O\+R\+\_\+\+U\+N\+IT,I\+N\+P\+U\+T\+\_\+\+U\+N\+IT,O\+U\+T\+P\+U\+T\+\_\+\+U\+N\+IT

are special, and will never return those values.

\subsubsection*{O\+P\+T\+I\+O\+NS}

start optional logical unit number to start scan at, defaults to 10. end optional logical unit number to stop scan at, defaults to 99. err optional error flag returned. E\+RR will be non-\/zero if no errors. If not present and an error occurs the program will stop instead of returning.

\subsubsection*{N\+O\+T\+ES}

\begin{DoxyVerb}Why are the default START and END limits from 10 to 99? the Fortran 77
standard did not specify a specific limit on the upper range limit, but
the LUN range of 1 to 99 was almost always supported in conventional
programming environments. Additionally, units in the range 0-10 have
often been the units used for pre-assigned files. Occasionally 100,
101 and 102 are reserved (for files such as standard input, standard
output, standard error, ...). Therefore, the defaults for START and
END were selected to be 10 and 99. And most programs do not need
more than 90 files simultaneously open, so the defaults work well in
practice with many versions/vintages of Fortran.

Note that an environment may impose a limit on the number of
simultaneously open files (which some compilers work around).

Beginning with f2008, you can probably use OPEN(NEWUNIT=...) instead.
\end{DoxyVerb}


\subsubsection*{E\+X\+A\+M\+P\+LE}

\begin{DoxyVerb}Sample program:

 program demo_notopen ! test the NOTOPEN(3f) function
 use m_io, only: notopen
 implicit none
 integer :: ii, ierr, igot

 write(*,*)'check for preassigned files from unit 0 to unit 1000'
 write(*,*)'(5 and 6 always return -1)'

 do ii=0,1000
    if(notopen(ii,ii,ierr) .ne. ii)then
       write(*,*)'INUSE:',ii, notopen(ii,ii,ierr)
    endif
 enddo

 ! open all files from UNIT=10 to UNIT=30 so have used units
 do ii=10,30,1
   open(unit=ii,status="scratch")
 enddo
 ! close UNIT=25
 close(25)

 ! find open file in range 10 to 30
 write(*,*)'Should get 25 for this ..',notopen(10,30,ierr)

 close(18)
 do ii=10,32
   igot=notopen(ii,ii,ierr)
   write(*,*)'For unit ',ii,' I got ',igot,' with ERR=',ierr
 enddo

 end program demo_notopen

Expected output(can vary with each programming environment):

   check for preassigned files from unit 0 to unit 1000
   (5 and 6 always return -1)
   INUSE:    0    -1
   INUSE:    5    -1
   INUSE:    6    -1
   Should get 25 for this .. 25
   For  unit  10  I  got  -1  with  ERR=  -1
   For  unit  11  I  got  -1  with  ERR=  -1
   For  unit  12  I  got  -1  with  ERR=  -1
   For  unit  13  I  got  -1  with  ERR=  -1
   For  unit  14  I  got  -1  with  ERR=  -1
   For  unit  15  I  got  -1  with  ERR=  -1
   For  unit  16  I  got  -1  with  ERR=  -1
   For  unit  17  I  got  -1  with  ERR=  -1
   For  unit  18  I  got  18  with  ERR=   0
   For  unit  19  I  got  -1  with  ERR=  -1
   For  unit  20  I  got  -1  with  ERR=  -1
   For  unit  21  I  got  -1  with  ERR=  -1
   For  unit  22  I  got  -1  with  ERR=  -1
   For  unit  23  I  got  -1  with  ERR=  -1
   For  unit  24  I  got  -1  with  ERR=  -1
   For  unit  25  I  got  25  with  ERR=   0
   For  unit  26  I  got  -1  with  ERR=  -1
   For  unit  27  I  got  -1  with  ERR=  -1
   For  unit  28  I  got  -1  with  ERR=  -1
   For  unit  29  I  got  -1  with  ERR=  -1
   For  unit  30  I  got  -1  with  ERR=  -1
   For  unit  31  I  got  31  with  ERR=   0
   For  unit  32  I  got  32  with  ERR=   0
\end{DoxyVerb}


\subsubsection*{A\+U\+T\+H\+O\+RS}

John S. Urban 

References then(), and unit().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=229pt]{namespacem__io_a673f7f7e137424eed9c6a736901a5cbc_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacem__io_a673f7f7e137424eed9c6a736901a5cbc_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacem__io_aa6ee277b2e0f1c263488624b34371fcf}\label{namespacem__io_aa6ee277b2e0f1c263488624b34371fcf}} 
\index{m\+\_\+io@{m\+\_\+io}!print\+\_\+inquire@{print\+\_\+inquire}}
\index{print\+\_\+inquire@{print\+\_\+inquire}!m\+\_\+io@{m\+\_\+io}}
\subsubsection{\texorpdfstring{print\+\_\+inquire()}{print\_inquire()}}
{\footnotesize\ttfamily \hyperlink{M__stopwatch_83_8txt_acfbcff50169d691ff02d4a123ed70482}{subroutine}, \hyperlink{M__stopwatch_83_8txt_a2f74811300c361e53b430611a7d1769f}{public} m\+\_\+io\+::print\+\_\+inquire (\begin{DoxyParamCaption}\item[{integer, intent(\hyperlink{M__journal_83_8txt_afce72651d1eed785a2132bee863b2f38}{in})}]{iunit,  }\item[{\hyperlink{option__stopwatch_83_8txt_abd4b21fbbd175834027b5224bfe97e66}{character}(len=$\ast$), intent(\hyperlink{M__journal_83_8txt_afce72651d1eed785a2132bee863b2f38}{in})}]{name }\end{DoxyParamCaption})}



\subsubsection*{N\+A\+ME}

print\+\_\+inquire(3f) -\/ \mbox{[}M\+\_\+io\mbox{]} Do I\+N\+Q\+U\+I\+RE on file by name/number and print results \subsubsection*{S\+Y\+N\+O\+P\+S\+IS}

Definition\+:

subroutine print\+\_\+inquire(iunit,name) integer,intent(in) \+:\+: iunit character(len=$\ast$),intent(in) \+:\+: name \subsubsection*{D\+E\+S\+C\+R\+I\+P\+T\+I\+ON}

Given either a Fortran file-\/unit-\/number or filename, call the I\+N\+Q\+U\+I\+R\+E(3f) intrinsic and print typical status information. \subsubsection*{O\+P\+T\+I\+O\+NS}

iunit if $>$=0 then query by number and ignore filename name if I\+U\+N\+IT $<$ 0 then query by this filename \subsubsection*{E\+X\+A\+M\+P\+LE}

\begin{DoxyVerb}Sample program:

   program demo_print_inquire
   use M_io, only : print_inquire

   call print_inquire(5,'')

   call print_inquire(19,'')

   open(unit=20)
   call print_inquire(20,'')

   open(unit=21,status='scratch')
   call print_inquire(21,'')

   open(unit=22,file='junko')
   write(22,*)'WRITE TO JUNKO'
   close(unit=22)
   call print_inquire(22,'')
   call print_inquire(-1,'junko')

   end program demo_print_inquire
\end{DoxyVerb}


Expected output\+: 

 {\itshape print\+\_\+inquire} checking file\+: /dev/pty1 {\itshape print\+\_\+inquire} file exists {\itshape print\+\_\+inquire} using unit number 5 \subsection*{$\ast$print\+\_\+inquire$\ast$ access type S\+E\+Q\+U\+E\+N\+T\+I\+AL,F\+O\+R\+M\+A\+T\+T\+ED }

\subsection*{$\ast$print\+\_\+inquire$\ast$ unit number is not open ,unit= 19 }

{\itshape print\+\_\+inquire} checking file\+: fort.\+20 {\itshape print\+\_\+inquire} file exists {\itshape print\+\_\+inquire} using unit number 20 \subsection*{$\ast$print\+\_\+inquire$\ast$ access type S\+E\+Q\+U\+E\+N\+T\+I\+AL,F\+O\+R\+M\+A\+T\+T\+ED }

\subsection*{$\ast$print\+\_\+inquire$\ast$ unit number is not named ,unit= 21 }

\subsection*{$\ast$print\+\_\+inquire$\ast$ unit number is not open ,unit= 22 }

{\itshape print\+\_\+inquire} checking file\+: junko {\itshape print\+\_\+inquire} file exists {\itshape print\+\_\+inquire} file is not open 

References file(), form, number, and unit().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=244pt]{namespacem__io_aa6ee277b2e0f1c263488624b34371fcf_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacem__io_aa6ee277b2e0f1c263488624b34371fcf_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacem__io_a8d9ee59e21830662fa59c300ca23e04b}\label{namespacem__io_a8d9ee59e21830662fa59c300ca23e04b}} 
\index{m\+\_\+io@{m\+\_\+io}!readline@{readline}}
\index{readline@{readline}!m\+\_\+io@{m\+\_\+io}}
\subsubsection{\texorpdfstring{readline()}{readline()}}
{\footnotesize\ttfamily integer function, \hyperlink{M__stopwatch_83_8txt_a2f74811300c361e53b430611a7d1769f}{public} m\+\_\+io\+::readline (\begin{DoxyParamCaption}\item[{\hyperlink{option__stopwatch_83_8txt_abd4b21fbbd175834027b5224bfe97e66}{character}(len=\+:), intent(out), allocatable}]{line,  }\item[{integer, intent(\hyperlink{M__journal_83_8txt_afce72651d1eed785a2132bee863b2f38}{in}), \hyperlink{option__stopwatch_83_8txt_aa4ece75e7acf58a4843f70fe18c3ade5}{optional}}]{lun }\end{DoxyParamCaption})}



\subsubsection*{N\+A\+ME}

readline(3f) -\/ \mbox{[}M\+\_\+io\mbox{]} read a line from specified L\+UN into allocatable string up to line length limit 

\subsubsection*{S\+Y\+N\+T\+AX}

function readline(line,lun) result(ier)

character(len=\+:),allocatable,intent(out) \+:\+: line integer,intent(in) \+:\+: lun integer,intent(out) \+:\+: ier

\subsubsection*{D\+E\+S\+C\+R\+I\+P\+T\+I\+ON}

\begin{DoxyVerb}Read a line of any length up to programming environment's maximum
line length. Requires Fortran 2003+.

It is primarily expected to be used when reading input which will
then be parsed.

o Append lines that end in a backslash with next line
o Expand tabs
o Replace unprintable characters with spaces
o Remove trailing carriage return characters and white space

The simple use of a loop that repeatedly re-allocates a character
variable in addition to reading the input file one buffer at a
time could (depending on the programming environment used) be
inefficient, as it could reallocate and allocate memory used for
the output string with each buffer read.
\end{DoxyVerb}


\subsubsection*{E\+X\+A\+M\+P\+LE}

Sample program\+:

program demo\+\_\+readline use M\+\_\+io, only \+: readline implicit none character(len=\+:),allocatable \+:\+: line I\+N\+F\+I\+N\+I\+TE\+: do while (readline(line)==0) write($\ast$,\textquotesingle{}(a)\textquotesingle{})\textquotesingle{}\mbox{[}\textquotesingle{}//line//\textquotesingle{}\mbox{]}\textquotesingle{} enddo I\+N\+F\+I\+N\+I\+TE end program demo\+\_\+readline 

References file(), is, name, m\+\_\+strings\+::notabs(), size(), and the().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=288pt]{namespacem__io_a8d9ee59e21830662fa59c300ca23e04b_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacem__io_a8d9ee59e21830662fa59c300ca23e04b_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacem__io_ad25822cde8058cd6861e2d9a5d729ccc}\label{namespacem__io_ad25822cde8058cd6861e2d9a5d729ccc}} 
\index{m\+\_\+io@{m\+\_\+io}!slurp@{slurp}}
\index{slurp@{slurp}!m\+\_\+io@{m\+\_\+io}}
\subsubsection{\texorpdfstring{slurp()}{slurp()}}
{\footnotesize\ttfamily \hyperlink{M__stopwatch_83_8txt_acfbcff50169d691ff02d4a123ed70482}{subroutine}, \hyperlink{M__stopwatch_83_8txt_a2f74811300c361e53b430611a7d1769f}{public} m\+\_\+io\+::slurp (\begin{DoxyParamCaption}\item[{\hyperlink{option__stopwatch_83_8txt_abd4b21fbbd175834027b5224bfe97e66}{character}(len=$\ast$), intent(\hyperlink{M__journal_83_8txt_afce72651d1eed785a2132bee863b2f38}{in})}]{filename,  }\item[{\hyperlink{option__stopwatch_83_8txt_abd4b21fbbd175834027b5224bfe97e66}{character}(len=1), dimension(\+:), intent(out), allocatable}]{text }\end{DoxyParamCaption})}



\subsubsection*{N\+A\+ME}

S\+L\+U\+R\+P(3f) -\/ \mbox{[}M\+\_\+io\mbox{]} read a file into a character array \subsubsection*{S\+Y\+N\+O\+P\+S\+IS}

Usage

subroutine slurp(filename,text) character(len=$\ast$),intent(in) \+:\+: filename character(len=1),allocatable,intent(out) \+:\+: text(\+:) \subsubsection*{D\+E\+S\+C\+R\+I\+P\+T\+I\+ON}

Read an entire file into memory as a stream, retaining line end terminals. Never casually read an entire file into memory if you can process it per line or in smaller units; as large files can consume unreasonable amounts of memory. \subsubsection*{O\+P\+T\+I\+O\+NS}

filename filename to read into memory text array of characters to hold file \subsubsection*{E\+X\+A\+M\+P\+L\+ES}

\begin{DoxyVerb}Sample program, assuming the input file "inputfile" exists:

 program demo_slurp
 use M_io, only      : slurp
 implicit none
 character(len=1),allocatable :: text(:) ! array to hold file in memory
 character(len=*),parameter :: FILENAME='inputfile' ! file to read

 ! create test file
 open(file=FILENAME,unit=10)
 write(10,'(a)') new_line('A')//'esrever lliw'
 write(10,'(a)') 'margorp elpmas eht taht'
 write(10,'(a)') 'elif elpmas a si sihT'
 close(unit=10)

 call slurp(FILENAME,text) ! allocate character array and copy file into it

 if(.not.allocated(text))then
    write(*,*)'*rever* failed to load file '//FILENAME
 else
    ! write file reversed to stdout
    write(*,'(*(a:))',advance='no')text(size(text):1:-1)
    deallocate(text)  ! release memory
 endif

 end program demo_slurp

Expected output:

 >This is a sample file
 >that the sample program
 >will reverse \end{DoxyVerb}
 

References file(), notopen(), stderr(), and unit().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=330pt]{namespacem__io_ad25822cde8058cd6861e2d9a5d729ccc_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacem__io_ad25822cde8058cd6861e2d9a5d729ccc_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacem__io_a7d1857c5c839bf3e096ce68fa1447d44}\label{namespacem__io_a7d1857c5c839bf3e096ce68fa1447d44}} 
\index{m\+\_\+io@{m\+\_\+io}!splitpath@{splitpath}}
\index{splitpath@{splitpath}!m\+\_\+io@{m\+\_\+io}}
\subsubsection{\texorpdfstring{splitpath()}{splitpath()}}
{\footnotesize\ttfamily \hyperlink{M__stopwatch_83_8txt_acfbcff50169d691ff02d4a123ed70482}{subroutine}, \hyperlink{M__stopwatch_83_8txt_a2f74811300c361e53b430611a7d1769f}{public} m\+\_\+io\+::splitpath (\begin{DoxyParamCaption}\item[{\hyperlink{option__stopwatch_83_8txt_abd4b21fbbd175834027b5224bfe97e66}{character}(len=$\ast$), intent(\hyperlink{M__journal_83_8txt_afce72651d1eed785a2132bee863b2f38}{in})}]{path,  }\item[{\hyperlink{option__stopwatch_83_8txt_abd4b21fbbd175834027b5224bfe97e66}{character}(len=$\ast$), intent(out)}]{dir,  }\item[{\hyperlink{option__stopwatch_83_8txt_abd4b21fbbd175834027b5224bfe97e66}{character}(len=$\ast$), intent(out)}]{name,  }\item[{\hyperlink{option__stopwatch_83_8txt_abd4b21fbbd175834027b5224bfe97e66}{character}(len=$\ast$), intent(out)}]{basename,  }\item[{\hyperlink{option__stopwatch_83_8txt_abd4b21fbbd175834027b5224bfe97e66}{character}(len=$\ast$), intent(out)}]{ext }\end{DoxyParamCaption})}



\subsubsection*{N\+A\+ME}

splitpath(3f) -\/ \mbox{[}M\+\_\+io\mbox{]} split a Unix pathname into components 

\subsubsection*{S\+Y\+N\+O\+P\+S\+IS}

splitpath(path,dir,name,basename,ext)

integer,parameter \+:\+: maxlen=4096 character(len=maxlen),intent(in) \+:\+: path character(len=maxlen),intent(out) \+:\+: dir character(len=maxlen),intent(out) \+:\+: name character(len=maxlen),intent(out) \+:\+: basename character(len=maxlen),intent(out) \+:\+: ext

\subsubsection*{D\+E\+S\+C\+R\+I\+P\+T\+I\+ON}

splitpath(3f) splits given pathname assuming a forward slash separates filename components and that the right-\/most period in the last leaf of the pathname is considered the beginning of an extension. If an extension is found it is left present in N\+A\+ME but removed from B\+A\+S\+E\+N\+A\+ME.

This routine does not check the system for the existence or type of the filename components; it merely parses a string.

\subsubsection*{O\+P\+T\+I\+O\+NS}

path Path to be broken into components. \begin{DoxyVerb}      o Forward slashes (/) are assumed to separate pathname components.
      o the name '.' is assumed to mean "current directory"
      o the name '..' is assumed to mean "up one directory
      o a pathname ending in a slash is assumed to be a directory name
      o a slash starting the pathname is assumed to represent the root
        directory.
      o trailing spaces are assumed insignificant.
\end{DoxyVerb}


Using these rules helps to reduce incorrect parsing, but the routine is only intended for simple parsing of names of the form "\mbox{[}dir/\mbox{]}name\mbox{[}.extension\mbox{]}.

\subsubsection*{R\+E\+S\+U\+L\+TS}

dir Path of directories, including the trailing slash. name Name of file leaf or, if no file is specified in path, name of the lowest directory. basename N\+A\+ME with any extension removed ext File name extension, if any, including the leading period (.).

The path parameter can be a complete or partial file specification. The special name \char`\"{}.\char`\"{} is assumed to mean the current directory, and the special name \char`\"{}..\char`\"{} is assumed to mean one directory above the current directory.

\subsubsection*{E\+X\+A\+M\+P\+LE}

program demo\+\_\+splitpath

use \hyperlink{namespacem__io}{m\+\_\+io}, only \+: splitpath implicit none integer,parameter \+:\+: maxlen=4096 character(len=maxlen),parameter \+:\+: file($\ast$)=\mbox{[}\& \& \textquotesingle{}dirs/name.\+ext \textquotesingle{}, \& \& \textquotesingle{}xx/\+I\+O/zz/\+N\+N.\+FF \textquotesingle{}, \& \& \textquotesingle{}xx/\+I\+O/zz/\+NN \textquotesingle{}, \& \& \textquotesingle{}/xx/\+I\+O/zz/\+NN \textquotesingle{}, \& \& \textquotesingle{}/xx/\+I\+O/zz/ \textquotesingle{}, \& \& \textquotesingle{}/xx/\+I\+O/zz.A/ \textquotesingle{}, \& \& \textquotesingle{}/xx/\+I\+O/zz/. \textquotesingle{}, \& \& \textquotesingle{} \textquotesingle{}, \& \& \textquotesingle{}./ \textquotesingle{}, \& \& \textquotesingle{}/ \textquotesingle{}, \& \& \textquotesingle{}/.. \textquotesingle{}, \& \& \textquotesingle{}./.. \textquotesingle{}, \& \& \textquotesingle{}name. \textquotesingle{}, \& \& \textquotesingle{}.name \textquotesingle{}, \& \& \textquotesingle{}.name. \textquotesingle{}, \& \& \textquotesingle{}. \textquotesingle{}, \& \& \textquotesingle{}.. \textquotesingle{}, \& \& \textquotesingle{}... \textquotesingle{}\mbox{]}

character(len=maxlen) \+:\+: dir character(len=maxlen) \+:\+: name character(len=maxlen) \+:\+: basename character(len=maxlen) \+:\+: ext integer \+:\+: i integer \+:\+: longest longest=maxval(len\+\_\+trim(file)) ! find longest filename

do i=1,size(file) call splitpath(file(i), dir, name, basename, ext) write($\ast$,\textquotesingle{}($\ast$(\char`\"{}$\vert$ \char`\"{},a\+:))\textquotesingle{}) \& \& file(i)(\+:longest), \& \& dir(\+:longest), \& \& name(\+:longest), \& \& basename(\+:longest), \& \& ext(\+:longest) enddo

Output

$\vert$ dirs/name.\+ext $\vert$ dirs $\vert$ name.\+ext $\vert$ name $\vert$ .ext $\vert$ xx/\+I\+O/zz/\+N\+N.\+FF$\vert$ xx/\+I\+O/zz $\vert$ N\+N.\+FF $\vert$ NN $\vert$ .FF $\vert$ xx/\+I\+O/zz/\+NN $\vert$ xx/\+I\+O/zz $\vert$ NN $\vert$ NN $\vert$ $\vert$ /xx/\+I\+O/zz/\+NN $\vert$ /xx/\+I\+O/zz $\vert$ NN $\vert$ NN $\vert$ $\vert$ /xx/\+I\+O/zz/ $\vert$ /xx/\+I\+O/zz $\vert$ $\vert$ $\vert$ $\vert$ /xx/\+I\+O/zz.A/ $\vert$ /xx/\+I\+O/zz.A $\vert$ $\vert$ $\vert$ $\vert$ /xx/\+I\+O/zz/. $\vert$ /xx/\+I\+O/zz/. $\vert$ $\vert$ $\vert$ $\vert$ $\vert$ . $\vert$ $\vert$ $\vert$ $\vert$ ./ $\vert$ . $\vert$ $\vert$ $\vert$ $\vert$ / $\vert$ / $\vert$ $\vert$ $\vert$ $\vert$ /.. $\vert$ / $\vert$ $\vert$ $\vert$ $\vert$ ./.. $\vert$ ./.. $\vert$ $\vert$ $\vert$ $\vert$ name. $\vert$ $\vert$ name. $\vert$ name $\vert$ . $\vert$ .name $\vert$ $\vert$ .name $\vert$ .name $\vert$ $\vert$ .name. $\vert$ $\vert$ .name. $\vert$ .name $\vert$ . $\vert$ . $\vert$ . $\vert$ $\vert$ $\vert$ $\vert$ .. $\vert$ $\vert$ $\vert$ $\vert$ $\vert$ ... $\vert$ $\vert$ ... $\vert$ .. $\vert$ . 

References m\+\_\+strings\+::split(), and true().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacem__io_a7d1857c5c839bf3e096ce68fa1447d44_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacem__io_a7d1857c5c839bf3e096ce68fa1447d44_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacem__io_adf7b5088ef3b4daa6c064d3e264ae821}\label{namespacem__io_adf7b5088ef3b4daa6c064d3e264ae821}} 
\index{m\+\_\+io@{m\+\_\+io}!uniq@{uniq}}
\index{uniq@{uniq}!m\+\_\+io@{m\+\_\+io}}
\subsubsection{\texorpdfstring{uniq()}{uniq()}}
{\footnotesize\ttfamily \hyperlink{option__stopwatch_83_8txt_abd4b21fbbd175834027b5224bfe97e66}{character}(len=\+:) function, allocatable, \hyperlink{M__stopwatch_83_8txt_a2f74811300c361e53b430611a7d1769f}{public} m\+\_\+io\+::uniq (\begin{DoxyParamCaption}\item[{\hyperlink{option__stopwatch_83_8txt_abd4b21fbbd175834027b5224bfe97e66}{character}(len=$\ast$), intent(\hyperlink{M__journal_83_8txt_afce72651d1eed785a2132bee863b2f38}{in})}]{name,  }\item[{integer, intent(\hyperlink{M__journal_83_8txt_afce72651d1eed785a2132bee863b2f38}{in}), \hyperlink{option__stopwatch_83_8txt_aa4ece75e7acf58a4843f70fe18c3ade5}{optional}}]{istart,  }\item[{logical, intent(\hyperlink{M__journal_83_8txt_afce72651d1eed785a2132bee863b2f38}{in}), \hyperlink{option__stopwatch_83_8txt_aa4ece75e7acf58a4843f70fe18c3ade5}{optional}}]{verbose,  }\item[{logical, intent(\hyperlink{M__journal_83_8txt_afce72651d1eed785a2132bee863b2f38}{in}), \hyperlink{option__stopwatch_83_8txt_aa4ece75e7acf58a4843f70fe18c3ade5}{optional}}]{create }\end{DoxyParamCaption})}



\subsubsection*{N\+A\+ME}

uniq(3f) -\/ \mbox{[}M\+\_\+io\mbox{]} append a number to the end of filename to make a unique name if name exists \subsubsection*{S\+Y\+N\+O\+P\+S\+IS}

Usage

character(len=\+:),allocatable function uniq(name,istart,verbose,create) character(len=$\ast$),intent(in) \+:\+: name integer,intent(in),optional \+:\+: istart logical,intent(in),optional \+:\+: verbose logical,intent(in),optional \+:\+: create

\subsubsection*{D\+E\+S\+C\+R\+I\+P\+T\+I\+ON}

Given a filename test if it is in use or exists. If it is, or if it ends in a period add a four-\/digit number to the end of the name and test if the new name exists. If necessary, increment the number and try again up to the value 9999999. By default an empty file is created if an unused name is found.

o relatively non-\/generic; o does not try to detect io errors

\subsubsection*{O\+P\+T\+I\+O\+NS}

name base input name used to create output filename If name ends in \char`\"{}.\char`\"{} a numeric suffix is always added. istart number to start with as a suffix. Default is 1. Must be a positive integer less than 9999999. verbose writes extra messages to stdout. Defaults to .false. create create file if new name is successfully found. Defaults to .true. .

\subsubsection*{R\+E\+T\+U\+R\+NS}

uniq A unique filename that is the same as the N\+A\+ME input parameter except with a number appended at the end if needed. If could not find a unique name a blank is returned.

\subsubsection*{E\+X\+A\+M\+P\+LE}

\begin{DoxyVerb}Sample program

   program demo_uniq
   use M_io, only : uniq
   implicit none
   character(len=4096) :: myname
   integer             :: i
      myname=uniq('does_not_exist')
      open(unit=10,file='does_exist')
      write(*,*)'name stays the same ',trim(myname)
      myname=uniq('does_exist')
      write(*,*)'name has suffix added ',trim(myname)
      do i=1,10
         myname=uniq('does_exist')
         write(*,*) 'FILENAME:',trim(myname)
         open(unit=20+i,file=myname)
      enddo
   end program demo_uniq

Expected output

 name stays the same does_not_exist
 name has suffix added does_exist0001
 FILENAME:does_exist0002
 FILENAME:does_exist0003
 FILENAME:does_exist0004
 FILENAME:does_exist0005
 FILENAME:does_exist0006
 FILENAME:does_exist0007
 FILENAME:does_exist0008
 FILENAME:does_exist0009
 FILENAME:does_exist0010
 FILENAME:does_exist0011
\end{DoxyVerb}


\subsubsection*{A\+U\+T\+H\+OR}

John S. Urban, 1993 

References false(), file(), true(), and unit().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacem__io_adf7b5088ef3b4daa6c064d3e264ae821_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacem__io_adf7b5088ef3b4daa6c064d3e264ae821_icgraph}
\end{center}
\end{figure}
