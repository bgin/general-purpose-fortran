<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GeneralPurposeFortran: m_io Module Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GeneralPurposeFortran
   </div>
   <div id="projectbrief">Fortran CLI (Command Line Interfaces)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">m_io Module Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:a13a76a3cca012978c1d9c5c0c8b4a7ef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="option__stopwatch_83_8txt.html#abd4b21fbbd175834027b5224bfe97e66">character</a>(len=4096) function, <a class="el" href="M__stopwatch_83_8txt.html#a2f74811300c361e53b430611a7d1769f">public</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacem__io.html#a13a76a3cca012978c1d9c5c0c8b4a7ef">uniq</a> (<a class="el" href="M__stopwatch_83_8txt.html#a3f508a893ae4c3b397b4383e33b9bcae">name</a>, istart, verbose)</td></tr>
<tr class="memdesc:a13a76a3cca012978c1d9c5c0c8b4a7ef"><td class="mdescLeft">&#160;</td><td class="mdescRight"><h2>NAME</h2>
uniq(3f) - [M_io] append a number to the end of filename to make a unique name if name exists </p><h2>SYNOPSIS</h2>
 <a href="#a13a76a3cca012978c1d9c5c0c8b4a7ef">More...</a><br /></td></tr>
<tr class="separator:a13a76a3cca012978c1d9c5c0c8b4a7ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6ee277b2e0f1c263488624b34371fcf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="M__stopwatch_83_8txt.html#acfbcff50169d691ff02d4a123ed70482">subroutine</a>, <a class="el" href="M__stopwatch_83_8txt.html#a2f74811300c361e53b430611a7d1769f">public</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacem__io.html#aa6ee277b2e0f1c263488624b34371fcf">print_inquire</a> (iunit, <a class="el" href="M__stopwatch_83_8txt.html#a3f508a893ae4c3b397b4383e33b9bcae">name</a>)</td></tr>
<tr class="memdesc:aa6ee277b2e0f1c263488624b34371fcf"><td class="mdescLeft">&#160;</td><td class="mdescRight"><h2>NAME</h2>
print_inquire(3f) - [M_io] Do INQUIRE on file by name/number and print results </p><h2>SYNOPSIS</h2>
 <a href="#aa6ee277b2e0f1c263488624b34371fcf">More...</a><br /></td></tr>
<tr class="separator:aa6ee277b2e0f1c263488624b34371fcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad25822cde8058cd6861e2d9a5d729ccc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="M__stopwatch_83_8txt.html#acfbcff50169d691ff02d4a123ed70482">subroutine</a>, <a class="el" href="M__stopwatch_83_8txt.html#a2f74811300c361e53b430611a7d1769f">public</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacem__io.html#ad25822cde8058cd6861e2d9a5d729ccc">slurp</a> (filename, <a class="el" href="notes_8txt.html#ad997a48ee1fbabed5333859846b5d9a3">text</a>)</td></tr>
<tr class="memdesc:ad25822cde8058cd6861e2d9a5d729ccc"><td class="mdescLeft">&#160;</td><td class="mdescRight"><h2>NAME</h2>
SLURP(3f) - [M_io] read a file into a character array </p><h2>SYNOPSIS</h2>
 <a href="#ad25822cde8058cd6861e2d9a5d729ccc">More...</a><br /></td></tr>
<tr class="separator:ad25822cde8058cd6861e2d9a5d729ccc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a673f7f7e137424eed9c6a736901a5cbc"><td class="memItemLeft" align="right" valign="top">integer function, <a class="el" href="M__stopwatch_83_8txt.html#a2f74811300c361e53b430611a7d1769f">public</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacem__io.html#a673f7f7e137424eed9c6a736901a5cbc">notopen</a> (start, end, err)</td></tr>
<tr class="memdesc:a673f7f7e137424eed9c6a736901a5cbc"><td class="mdescLeft">&#160;</td><td class="mdescRight"><h2>NAME</h2>
notopen(3f) - [M_io] Find a FUN/LUN (Fortran-unit-number) that is not in use </p><h2>SYNOPSIS</h2>
 <a href="#a673f7f7e137424eed9c6a736901a5cbc">More...</a><br /></td></tr>
<tr class="separator:a673f7f7e137424eed9c6a736901a5cbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85eb6aa886ca8e591fdc837919f81708"><td class="memItemLeft" align="right" valign="top"><a class="el" href="option__stopwatch_83_8txt.html#abd4b21fbbd175834027b5224bfe97e66">character</a>(len=:) function, allocatable, <a class="el" href="M__stopwatch_83_8txt.html#a2f74811300c361e53b430611a7d1769f">public</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacem__io.html#a85eb6aa886ca8e591fdc837919f81708">dirname</a> (filename)</td></tr>
<tr class="memdesc:a85eb6aa886ca8e591fdc837919f81708"><td class="mdescLeft">&#160;</td><td class="mdescRight"><h2>NAME</h2>
dirname(3f) - [M_io] strip last component from filename  <a href="#a85eb6aa886ca8e591fdc837919f81708">More...</a><br /></td></tr>
<tr class="separator:a85eb6aa886ca8e591fdc837919f81708"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d1857c5c839bf3e096ce68fa1447d44"><td class="memItemLeft" align="right" valign="top"><a class="el" href="M__stopwatch_83_8txt.html#acfbcff50169d691ff02d4a123ed70482">subroutine</a>, <a class="el" href="M__stopwatch_83_8txt.html#a2f74811300c361e53b430611a7d1769f">public</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacem__io.html#a7d1857c5c839bf3e096ce68fa1447d44">splitpath</a> (path, dir, <a class="el" href="M__stopwatch_83_8txt.html#a3f508a893ae4c3b397b4383e33b9bcae">name</a>, basename, ext)</td></tr>
<tr class="memdesc:a7d1857c5c839bf3e096ce68fa1447d44"><td class="mdescLeft">&#160;</td><td class="mdescRight"><h2>NAME</h2>
splitpath(3f) - [M_io] split a Unix pathname into components  <a href="#a7d1857c5c839bf3e096ce68fa1447d44">More...</a><br /></td></tr>
<tr class="separator:a7d1857c5c839bf3e096ce68fa1447d44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6793f5adc45177098781af4be39911ff"><td class="memItemLeft" align="right" valign="top">logical function, <a class="el" href="M__stopwatch_83_8txt.html#a2f74811300c361e53b430611a7d1769f">public</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacem__io.html#a6793f5adc45177098781af4be39911ff">isdir</a> (<a class="el" href="namespacem__io.html#a85eb6aa886ca8e591fdc837919f81708">dirname</a>)</td></tr>
<tr class="memdesc:a6793f5adc45177098781af4be39911ff"><td class="mdescLeft">&#160;</td><td class="mdescRight"><h2>NAME</h2>
isdir(3f) - [M_io] checks if argument is a directory path </p><h2>SYNTAX</h2>
logical function isdir(path) </p><h2>DESCRIPTION</h2>
isdir(3f) checks if path is a path to a directory. </p><h2>OPTIONS</h2>
path a character string representing a directory pathname. Trailing spaces are ignored. </p><h2>EXAMPLES</h2>
 <a href="#a6793f5adc45177098781af4be39911ff">More...</a><br /></td></tr>
<tr class="separator:a6793f5adc45177098781af4be39911ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d9ee59e21830662fa59c300ca23e04b"><td class="memItemLeft" align="right" valign="top">integer function, <a class="el" href="M__stopwatch_83_8txt.html#a2f74811300c361e53b430611a7d1769f">public</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacem__io.html#a8d9ee59e21830662fa59c300ca23e04b">readline</a> (line, lun)</td></tr>
<tr class="memdesc:a8d9ee59e21830662fa59c300ca23e04b"><td class="mdescLeft">&#160;</td><td class="mdescRight"><h2>NAME</h2>
readline(3f) - [M_io] read a line from specified LUN into allocatable string up to line length limit  <a href="#a8d9ee59e21830662fa59c300ca23e04b">More...</a><br /></td></tr>
<tr class="separator:a8d9ee59e21830662fa59c300ca23e04b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="a85eb6aa886ca8e591fdc837919f81708"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85eb6aa886ca8e591fdc837919f81708">&#9670;&nbsp;</a></span>dirname()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="option__stopwatch_83_8txt.html#abd4b21fbbd175834027b5224bfe97e66">character</a>(len=:) function, allocatable, <a class="el" href="M__stopwatch_83_8txt.html#a2f74811300c361e53b430611a7d1769f">public</a> m_io::dirname </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="option__stopwatch_83_8txt.html#abd4b21fbbd175834027b5224bfe97e66">character</a>(len=*), intent(<a class="el" href="M__journal_83_8txt.html#afce72651d1eed785a2132bee863b2f38">in</a>)&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><h2>NAME</h2>
dirname(3f) - [M_io] strip last component from filename </p>
<h2>SYNOPSIS</h2>
<pre class="fragment">function dirname(FILENAME) result (DIRECTORY)

  character(len=*),intent(in)  :: FILENAME
  character(len=:),allocatable :: DIRECTORY
</pre><h2>DESCRIPTION</h2>
<p>Output FILENAME with its last non-slash component and trailing slashes removed. if FILENAME contains no /'s, output '.' (meaning the current directory).</p>
<p>Assumes leaf separator is a slash ('/') and that filename does not contain trailing spaces.</p>
<h2>OPTIONS</h2>
<p>FILENAME pathname to remove the last leaf from</p>
<h2>RETURNS</h2>
<p>DIRECTORY directory name for pathname</p>
<h2>EXAMPLES</h2>
<p>Sample program:</p>
<p>program demo_dirname use M_io, only : dirname implicit none character(len=:),allocatable :: filename integer :: filename_length integer :: i ! get pathname from command line arguments do i = 1 , command_argument_count() call get_command_argument (i , length=filename_length) allocate(character(len=filename_length) :: filename) call get_command_argument (i , value=filename) write(*,'(a)')dirname(filename) deallocate(filename) enddo end program demo_dirname</p>
<p>Sample program executions:</p>
<p>demo_dirname /usr/bin/ -&gt; "/usr" demo_dirname dir1/str dir2/str -&gt; "dir1" followed by "dir2" demo_dirname stdio.h -&gt; "."</p>
<h2>SEE ALSO</h2>
<p>dirname(3c), basename(3c), readlink(3c), realpath(3c) PRODUCT: CLI library utilities and examples PROGRAM: dirname(3f) DESCRIPTION: strip last component from filename </p><h2>VERSION: 1.0.0</h2>
<h2>DATE: 2015-06-26</h2>
<p>AUTHOR: John S. Urban REPORTING BUGS: <a href="http://www.urbanjost.altervista.org/">http://www.urbanjost.altervista.org/</a> HOME PAGE: <a href="http://www.urbanjost.altervista.org/index.html">http://www.urbanjost.altervista.org/index.html</a> LICENSE: Public Domain. This is free software: you are free to change and redistribute it. There is NO WARRANTY, to the extent permitted by law. </p>

<p class="reference">References <a class="el" href="M__io_8f90.html#af19c15eaa4f2a0ca08d241277ce7c256">removetail()</a>, and <a class="el" href="__true_8f90.html#a7ed1d79677aed1b23489a4fe0bd16daa">true()</a>.</p>

</div>
</div>
<a id="a6793f5adc45177098781af4be39911ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6793f5adc45177098781af4be39911ff">&#9670;&nbsp;</a></span>isdir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">logical function, <a class="el" href="M__stopwatch_83_8txt.html#a2f74811300c361e53b430611a7d1769f">public</a> m_io::isdir </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="option__stopwatch_83_8txt.html#abd4b21fbbd175834027b5224bfe97e66">character</a>(len=*), intent(<a class="el" href="M__journal_83_8txt.html#afce72651d1eed785a2132bee863b2f38">in</a>)&#160;</td>
          <td class="paramname"><em>dirname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><h2>NAME</h2>
isdir(3f) - [M_io] checks if argument is a directory path </p><h2>SYNTAX</h2>
logical function isdir(path) </p><h2>DESCRIPTION</h2>
isdir(3f) checks if path is a path to a directory. </p><h2>OPTIONS</h2>
path a character string representing a directory pathname. Trailing spaces are ignored. </p><h2>EXAMPLES</h2>
</p>
<p>Sample program:</p>
<p>program demo_isdir Use M_io, only : isdir implicit none integer :: i character(len=80),parameter :: names(*)=[ &amp; '/tmp ', &amp; '/tmp/NOTTHERE ', &amp; '/usr/local ', &amp; '. ', &amp; 'PROBABLY_NOT '] do i=1,size(names) write(*,*)' is ',trim(names(i)),' a directory? ', isdir(names(i)) enddo end program demo_isdir</p>
<p>Results:</p>
<p>is /tmp a directory? T is /tmp/NOTTHERE a directory? F is /usr/local a directory? T is . a directory? T is PROBABLY_NOT a directory? F </p>

<p class="reference">References <a class="el" href="__false_8f90.html#ac39cd9fe2012c31749944aa6b20b6c05">false()</a>, and <a class="el" href="what__overview_81_8txt.html#a447b56c526e8da30e0dc94673727ee25">file()</a>.</p>

</div>
</div>
<a id="a673f7f7e137424eed9c6a736901a5cbc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a673f7f7e137424eed9c6a736901a5cbc">&#9670;&nbsp;</a></span>notopen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">integer function, <a class="el" href="M__stopwatch_83_8txt.html#a2f74811300c361e53b430611a7d1769f">public</a> m_io::notopen </td>
          <td>(</td>
          <td class="paramtype">integer, intent(<a class="el" href="M__journal_83_8txt.html#afce72651d1eed785a2132bee863b2f38">in</a>), <a class="el" href="option__stopwatch_83_8txt.html#aa4ece75e7acf58a4843f70fe18c3ade5">optional</a>&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(<a class="el" href="M__journal_83_8txt.html#afce72651d1eed785a2132bee863b2f38">in</a>), <a class="el" href="option__stopwatch_83_8txt.html#aa4ece75e7acf58a4843f70fe18c3ade5">optional</a>&#160;</td>
          <td class="paramname"><em>end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out), <a class="el" href="option__stopwatch_83_8txt.html#aa4ece75e7acf58a4843f70fe18c3ade5">optional</a>&#160;</td>
          <td class="paramname"><em>err</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><h2>NAME</h2>
notopen(3f) - [M_io] Find a FUN/LUN (Fortran-unit-number) that is not in use </p><h2>SYNOPSIS</h2>
</p>
<p>Usage</p>
<p>integer function notopen(start,end,err) integer,optional,intent(in) :: start integer,optional,intent(in) :: end integer,optional,intent(out) :: err </p><h2>DESCRIPTION</h2>
<p>A free FORTRAN unit number is needed to OPEN a file. NOTOPEN() returns a FORTRAN unit number from START to END not currently associated with an I/O unit. START and END are expected to be positive integers where END .ge. START.</p>
<p>If NOTOPEN() returns -1, then no free FORTRAN unit could be found in the specified range.</p>
<p>Otherwise, NOTOPEN() returns an integer representing a free FORTRAN logical unit number. Note that NOTOPEN() assumes the following unit numbers defined by the Fortran 2008 ISO_FORTRAN_ENV module</p>
<p>ERROR_UNIT,INPUT_UNIT,OUTPUT_UNIT</p>
<p>are special, and will never return those values.</p>
<h2>OPTIONS</h2>
<p>start optional logical unit number to start scan at, defaults to 10. end optional logical unit number to stop scan at, defaults to 99. err optional error flag returned. ERR will be non-zero if no errors. If not present and an error occurs the program will stop instead of returning.</p>
<h2>NOTES</h2>
<pre class="fragment">Why are the default START and END limits from 10 to 99? the Fortran 77
standard did not specify a specific limit on the upper range limit, but
the LUN range of 1 to 99 was almost always supported in conventional
programming environments. Additionally, units in the range 0-10 have
often been the units used for pre-assigned files. Occasionally 100,
101 and 102 are reserved (for files such as standard input, standard
output, standard error, ...). Therefore, the defaults for START and
END were selected to be 10 and 99. And most programs do not need
more than 90 files simultaneously open, so the defaults work well in
practice with many versions/vintages of Fortran.

Note that an environment may impose a limit on the number of
simultaneously open files (which some compilers work around).

Beginning with f2008, you can probably use OPEN(NEWUNIT=...) instead.
</pre><h2>EXAMPLE</h2>
<pre class="fragment">Sample program:

 program demo_notopen ! test the NOTOPEN(3f) function
 use m_io, only: notopen
 implicit none
 integer :: ii, ierr, igot

 write(*,*)'check for preassigned files from unit 0 to unit 1000'
 write(*,*)'(5 and 6 always return -1)'

 do ii=0,1000
    if(notopen(ii,ii,ierr) .ne. ii)then
       write(*,*)'INUSE:',ii, notopen(ii,ii,ierr)
    endif
 enddo

 ! open all files from UNIT=10 to UNIT=30 so have used units
 do ii=10,30,1
   open(unit=ii,status="scratch")
 enddo
 ! close UNIT=25
 close(25)

 ! find open file in range 10 to 30
 write(*,*)'Should get 25 for this ..',notopen(10,30,ierr)

 close(18)
 do ii=10,32
   igot=notopen(ii,ii,ierr)
   write(*,*)'For unit ',ii,' I got ',igot,' with ERR=',ierr
 enddo

 end program demo_notopen

Expected output(can vary with each programming environment):

   check for preassigned files from unit 0 to unit 1000
   (5 and 6 always return -1)
   INUSE:    0    -1
   INUSE:    5    -1
   INUSE:    6    -1
   Should get 25 for this .. 25
   For  unit  10  I  got  -1  with  ERR=  -1
   For  unit  11  I  got  -1  with  ERR=  -1
   For  unit  12  I  got  -1  with  ERR=  -1
   For  unit  13  I  got  -1  with  ERR=  -1
   For  unit  14  I  got  -1  with  ERR=  -1
   For  unit  15  I  got  -1  with  ERR=  -1
   For  unit  16  I  got  -1  with  ERR=  -1
   For  unit  17  I  got  -1  with  ERR=  -1
   For  unit  18  I  got  18  with  ERR=   0
   For  unit  19  I  got  -1  with  ERR=  -1
   For  unit  20  I  got  -1  with  ERR=  -1
   For  unit  21  I  got  -1  with  ERR=  -1
   For  unit  22  I  got  -1  with  ERR=  -1
   For  unit  23  I  got  -1  with  ERR=  -1
   For  unit  24  I  got  -1  with  ERR=  -1
   For  unit  25  I  got  25  with  ERR=   0
   For  unit  26  I  got  -1  with  ERR=  -1
   For  unit  27  I  got  -1  with  ERR=  -1
   For  unit  28  I  got  -1  with  ERR=  -1
   For  unit  29  I  got  -1  with  ERR=  -1
   For  unit  30  I  got  -1  with  ERR=  -1
   For  unit  31  I  got  31  with  ERR=   0
   For  unit  32  I  got  32  with  ERR=   0
</pre><h2>AUTHORS</h2>
<p>John S. Urban </p>

<p class="reference">References <a class="el" href="intro__blas1_83_8txt.html#a113d08052d0d63bec82e36de68d76cdc">then()</a>, and <a class="el" href="M__stopwatch_83_8txt.html#a5cbef30eb7c0d734bd82f5a7ebea9aa7">unit()</a>.</p>

</div>
</div>
<a id="aa6ee277b2e0f1c263488624b34371fcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6ee277b2e0f1c263488624b34371fcf">&#9670;&nbsp;</a></span>print_inquire()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="M__stopwatch_83_8txt.html#acfbcff50169d691ff02d4a123ed70482">subroutine</a>, <a class="el" href="M__stopwatch_83_8txt.html#a2f74811300c361e53b430611a7d1769f">public</a> m_io::print_inquire </td>
          <td>(</td>
          <td class="paramtype">integer, intent(<a class="el" href="M__journal_83_8txt.html#afce72651d1eed785a2132bee863b2f38">in</a>)&#160;</td>
          <td class="paramname"><em>iunit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="option__stopwatch_83_8txt.html#abd4b21fbbd175834027b5224bfe97e66">character</a>(len=*), intent(<a class="el" href="M__journal_83_8txt.html#afce72651d1eed785a2132bee863b2f38">in</a>)&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><h2>NAME</h2>
print_inquire(3f) - [M_io] Do INQUIRE on file by name/number and print results </p><h2>SYNOPSIS</h2>
</p>
<p>Definition:</p>
<p>subroutine print_inquire(iunit,name) integer,intent(in) :: iunit character(len=*),intent(in) :: name </p><h2>DESCRIPTION</h2>
<p>Given either a Fortran file-unit-number or filename, call the INQUIRE(3f) intrinsic and print typical status information. </p><h2>OPTIONS</h2>
<p>iunit if &gt;=0 then query by number and ignore filename name if IUNIT &lt; 0 then query by this filename </p><h2>EXAMPLE</h2>
<pre class="fragment">Sample program:

   program demo_print_inquire
   use M_io, only : print_inquire

   call print_inquire(5,'')

   call print_inquire(19,'')

   open(unit=20)
   call print_inquire(20,'')

   open(unit=21,status='scratch')
   call print_inquire(21,'')

   open(unit=22,file='junko')
   write(22,*)'WRITE TO JUNKO'
   close(unit=22)
   call print_inquire(22,'')
   call print_inquire(-1,'junko')

   end program demo_print_inquire
</pre><p>Expected output: </p><hr/>
<p> <em>print_inquire</em> checking file: /dev/pty1 <em>print_inquire</em> file exists <em>print_inquire</em> using unit number 5 </p><h1>*print_inquire* access type SEQUENTIAL,FORMATTED </h1>
<h1>*print_inquire* unit number is not open ,unit= 19 </h1>
<p><em>print_inquire</em> checking file: fort.20 <em>print_inquire</em> file exists <em>print_inquire</em> using unit number 20 </p><h1>*print_inquire* access type SEQUENTIAL,FORMATTED </h1>
<h1>*print_inquire* unit number is not named ,unit= 21 </h1>
<h1>*print_inquire* unit number is not open ,unit= 22 </h1>
<p><em>print_inquire</em> checking file: junko <em>print_inquire</em> file exists <em>print_inquire</em> file is not open </p>

<p class="reference">References <a class="el" href="what__overview_81_8txt.html#a447b56c526e8da30e0dc94673727ee25">file()</a>, <a class="el" href="print__watch_83_8txt.html#a8fdbaaece3b2ad2ab6982e68e7539f04">form</a>, <a class="el" href="what__overview_81_8txt.html#a5168680dcac08de182f59de9a12c38ae">number</a>, and <a class="el" href="M__stopwatch_83_8txt.html#a5cbef30eb7c0d734bd82f5a7ebea9aa7">unit()</a>.</p>

</div>
</div>
<a id="a8d9ee59e21830662fa59c300ca23e04b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d9ee59e21830662fa59c300ca23e04b">&#9670;&nbsp;</a></span>readline()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">integer function, <a class="el" href="M__stopwatch_83_8txt.html#a2f74811300c361e53b430611a7d1769f">public</a> m_io::readline </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="option__stopwatch_83_8txt.html#abd4b21fbbd175834027b5224bfe97e66">character</a>(len=:), intent(out), allocatable&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(<a class="el" href="M__journal_83_8txt.html#afce72651d1eed785a2132bee863b2f38">in</a>), <a class="el" href="option__stopwatch_83_8txt.html#aa4ece75e7acf58a4843f70fe18c3ade5">optional</a>&#160;</td>
          <td class="paramname"><em>lun</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><h2>NAME</h2>
readline(3f) - [M_io] read a line from specified LUN into allocatable string up to line length limit </p>
<h2>SYNTAX</h2>
<p>function readline(line,lun) result(ier)</p>
<p>character(len=:),allocatable,intent(out) :: line integer,intent(in) :: lun integer,intent(out) :: ier</p>
<h2>DESCRIPTION</h2>
<pre class="fragment">Read a line of any length up to programming environment's maximum
line length. Requires Fortran 2003+.

It is primarily expected to be used when reading input which will
then be parsed.

o Append lines that end in a backslash with next line
o Expand tabs
o Replace unprintable characters with spaces
o Remove trailing carriage return characters and white space

The simple use of a loop that repeatedly re-allocates a character
variable in addition to reading the input file one buffer at a
time could (depending on the programming environment used) be
inefficient, as it could reallocate and allocate memory used for
the output string with each buffer read.
</pre><h2>EXAMPLE</h2>
<p>Sample program:</p>
<p>program demo_readline use M_io, only : readline implicit none character(len=:),allocatable :: line INFINITE: do while (readline(line)==0) write(*,'(a)')'['//line//']' enddo INFINITE end program demo_readline </p>

<p class="reference">References <a class="el" href="M__journal_83_8txt.html#af78cd777fb46433462e3afacb9c375fd">is</a>, <a class="el" href="namespacem__strings.html#a3bf44ac06a670f55830e17a6f1108b9c">m_strings::notabs()</a>, and <a class="el" href="what__overview_81_8txt.html#ab5692ed87074f1d5ec850a9ffa8b5af9">size()</a>.</p>

</div>
</div>
<a id="ad25822cde8058cd6861e2d9a5d729ccc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad25822cde8058cd6861e2d9a5d729ccc">&#9670;&nbsp;</a></span>slurp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="M__stopwatch_83_8txt.html#acfbcff50169d691ff02d4a123ed70482">subroutine</a>, <a class="el" href="M__stopwatch_83_8txt.html#a2f74811300c361e53b430611a7d1769f">public</a> m_io::slurp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="option__stopwatch_83_8txt.html#abd4b21fbbd175834027b5224bfe97e66">character</a>(len=*), intent(<a class="el" href="M__journal_83_8txt.html#afce72651d1eed785a2132bee863b2f38">in</a>)&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="option__stopwatch_83_8txt.html#abd4b21fbbd175834027b5224bfe97e66">character</a>(len=1), dimension(:), intent(out), allocatable&#160;</td>
          <td class="paramname"><em>text</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><h2>NAME</h2>
SLURP(3f) - [M_io] read a file into a character array </p><h2>SYNOPSIS</h2>
</p>
<p>Usage</p>
<p>subroutine slurp(filename,text) character(len=*),intent(in) :: filename character(len=1),allocatable,intent(out) :: text(:) </p><h2>DESCRIPTION</h2>
<p>Read an entire file into memory as a stream, retaining line end terminals. Never casually read an entire file into memory if you can process it per line or in smaller units; as large files can consume unreasonable amounts of memory. </p><h2>OPTIONS</h2>
<p>filename filename to read into memory text array of characters to hold file </p><h2>EXAMPLES</h2>
<pre class="fragment">Sample program, assuming the input file "inputfile" exists:

 program demo_slurp
 use M_io, only      : slurp
 implicit none
 character(len=1),allocatable :: text(:) ! array to hold file in memory
 character(len=*),parameter :: FILENAME='inputfile' ! file to read

 ! create test file
 open(file=FILENAME,unit=10)
 write(10,'(a)') new_line('A')//'esrever lliw'
 write(10,'(a)') 'margorp elpmas eht taht'
 write(10,'(a)') 'elif elpmas a si sihT'
 close(unit=10)

 call slurp(FILENAME,text) ! allocate character array and copy file into it

 if(.not.allocated(text))then
    write(*,*)'*rever* failed to load file '//FILENAME
 else
    ! write file reversed to stdout
    write(*,'(*(a:))',advance='no')text(size(text):1:-1)
    deallocate(text)  ! release memory
 endif

 end program demo_slurp

Expected output:

 &gt;This is a sample file
 &gt;that the sample program
 &gt;will reverse </pre> 
<p class="reference">References <a class="el" href="what__overview_81_8txt.html#a447b56c526e8da30e0dc94673727ee25">file()</a>, <a class="el" href="namespacem__io.html#a673f7f7e137424eed9c6a736901a5cbc">notopen()</a>, <a class="el" href="M__io_8f90.html#a448cccd08d4d6bce645ffbbf14cdfa7e">stderr()</a>, and <a class="el" href="M__stopwatch_83_8txt.html#a5cbef30eb7c0d734bd82f5a7ebea9aa7">unit()</a>.</p>

</div>
</div>
<a id="a7d1857c5c839bf3e096ce68fa1447d44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d1857c5c839bf3e096ce68fa1447d44">&#9670;&nbsp;</a></span>splitpath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="M__stopwatch_83_8txt.html#acfbcff50169d691ff02d4a123ed70482">subroutine</a>, <a class="el" href="M__stopwatch_83_8txt.html#a2f74811300c361e53b430611a7d1769f">public</a> m_io::splitpath </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="option__stopwatch_83_8txt.html#abd4b21fbbd175834027b5224bfe97e66">character</a>(len=*), intent(<a class="el" href="M__journal_83_8txt.html#afce72651d1eed785a2132bee863b2f38">in</a>)&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="option__stopwatch_83_8txt.html#abd4b21fbbd175834027b5224bfe97e66">character</a>(len=*), intent(out)&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="option__stopwatch_83_8txt.html#abd4b21fbbd175834027b5224bfe97e66">character</a>(len=*), intent(out)&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="option__stopwatch_83_8txt.html#abd4b21fbbd175834027b5224bfe97e66">character</a>(len=*), intent(out)&#160;</td>
          <td class="paramname"><em>basename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="option__stopwatch_83_8txt.html#abd4b21fbbd175834027b5224bfe97e66">character</a>(len=*), intent(out)&#160;</td>
          <td class="paramname"><em>ext</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><h2>NAME</h2>
splitpath(3f) - [M_io] split a Unix pathname into components </p>
<h2>SYNOPSIS</h2>
<p>splitpath(path,dir,name,basename,ext)</p>
<p>integer,parameter :: maxlen=4096 character(len=maxlen),intent(in) :: path character(len=maxlen),intent(out) :: dir character(len=maxlen),intent(out) :: name character(len=maxlen),intent(out) :: basename character(len=maxlen),intent(out) :: ext</p>
<h2>DESCRIPTION</h2>
<p>splitpath(3f) splits given pathname assuming a forward slash separates filename components and that the right-most period in the last leaf of the pathname is considered the beginning of an extension. If an extension is found it is left present in NAME but removed from BASENAME.</p>
<p>This routine does not check the system for the existence or type of the filename components; it merely parses a string.</p>
<h2>OPTIONS</h2>
<p>path Path to be broken into components. </p><pre class="fragment">      o Forward slashes (/) are assumed to separate pathname components.
      o the name '.' is assumed to mean "current directory"
      o the name '..' is assumed to mean "up one directory
      o a pathname ending in a slash is assumed to be a directory name
      o a slash starting the pathname is assumed to represent the root
        directory.
      o trailing spaces are assumed insignificant.
</pre><p>Using these rules helps to reduce incorrect parsing, but the routine is only intended for simple parsing of names of the form "[dir/]name[.extension].</p>
<h2>RESULTS</h2>
<p>dir Path of directories, including the trailing slash. name Name of file leaf or, if no file is specified in path, name of the lowest directory. basename NAME with any extension removed ext File name extension, if any, including the leading period (.).</p>
<p>The path parameter can be a complete or partial file specification. The special name "." is assumed to mean the current directory, and the special name ".." is assumed to mean one directory above the current directory.</p>
<h2>EXAMPLE</h2>
<p>program demo_splitpath</p>
<p>use <a class="el" href="namespacem__io.html">m_io</a>, only : splitpath implicit none integer,parameter :: maxlen=4096 character(len=maxlen),parameter :: file(*)=[&amp; &amp; 'dirs/name.ext ', &amp; &amp; 'xx/IO/zz/NN.FF ', &amp; &amp; 'xx/IO/zz/NN ', &amp; &amp; '/xx/IO/zz/NN ', &amp; &amp; '/xx/IO/zz/ ', &amp; &amp; '/xx/IO/zz.A/ ', &amp; &amp; '/xx/IO/zz/. ', &amp; &amp; ' ', &amp; &amp; './ ', &amp; &amp; '/ ', &amp; &amp; '/.. ', &amp; &amp; './.. ', &amp; &amp; 'name. ', &amp; &amp; '.name ', &amp; &amp; '.name. ', &amp; &amp; '. ', &amp; &amp; '.. ', &amp; &amp; '... ']</p>
<p>character(len=maxlen) :: dir character(len=maxlen) :: name character(len=maxlen) :: basename character(len=maxlen) :: ext integer :: i integer :: longest longest=maxval(len_trim(file)) ! find longest filename</p>
<p>do i=1,size(file) call splitpath(file(i), dir, name, basename, ext) write(*,'(*("| ",a:))') &amp; &amp; file(i)(:longest), &amp; &amp; dir(:longest), &amp; &amp; name(:longest), &amp; &amp; basename(:longest), &amp; &amp; ext(:longest) enddo</p>
<p>Output</p>
<p>| dirs/name.ext | dirs | name.ext | name | .ext | xx/IO/zz/NN.FF| xx/IO/zz | NN.FF | NN | .FF | xx/IO/zz/NN | xx/IO/zz | NN | NN | | /xx/IO/zz/NN | /xx/IO/zz | NN | NN | | /xx/IO/zz/ | /xx/IO/zz | | | | /xx/IO/zz.A/ | /xx/IO/zz.A | | | | /xx/IO/zz/. | /xx/IO/zz/. | | | | | . | | | | ./ | . | | | | / | / | | | | /.. | / | | | | ./.. | ./.. | | | | name. | | name. | name | . | .name | | .name | .name | | .name. | | .name. | .name | . | . | . | | | | .. | | | | | ... | | ... | .. | . </p>

<p class="reference">References <a class="el" href="namespacem__strings.html#a3f0119fab962146c7656cad592dd9acd">m_strings::split()</a>, and <a class="el" href="__true_8f90.html#a7ed1d79677aed1b23489a4fe0bd16daa">true()</a>.</p>

</div>
</div>
<a id="a13a76a3cca012978c1d9c5c0c8b4a7ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13a76a3cca012978c1d9c5c0c8b4a7ef">&#9670;&nbsp;</a></span>uniq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="option__stopwatch_83_8txt.html#abd4b21fbbd175834027b5224bfe97e66">character</a>(len=4096) function, <a class="el" href="M__stopwatch_83_8txt.html#a2f74811300c361e53b430611a7d1769f">public</a> m_io::uniq </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="option__stopwatch_83_8txt.html#abd4b21fbbd175834027b5224bfe97e66">character</a>(len=*), intent(<a class="el" href="M__journal_83_8txt.html#afce72651d1eed785a2132bee863b2f38">in</a>)&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(<a class="el" href="M__journal_83_8txt.html#afce72651d1eed785a2132bee863b2f38">in</a>), <a class="el" href="option__stopwatch_83_8txt.html#aa4ece75e7acf58a4843f70fe18c3ade5">optional</a>&#160;</td>
          <td class="paramname"><em>istart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, intent(<a class="el" href="M__journal_83_8txt.html#afce72651d1eed785a2132bee863b2f38">in</a>), <a class="el" href="option__stopwatch_83_8txt.html#aa4ece75e7acf58a4843f70fe18c3ade5">optional</a>&#160;</td>
          <td class="paramname"><em>verbose</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><h2>NAME</h2>
uniq(3f) - [M_io] append a number to the end of filename to make a unique name if name exists </p><h2>SYNOPSIS</h2>
</p>
<p>Usage</p>
<p>character(len=:),allocatable function uniq(name,istart,verbose) character(len=*),intent(in) :: name integer,intent(in),optional :: istart logical,intent(in),optional :: verbose</p>
<h2>DESCRIPTION</h2>
<p>Given a filename test if it is in use or exists. If it is, or if it ends in a period add a four-digit number to the end of the name and test if the new name exists. If necessary, increment the number and try again up to the value 9999. An empty file is created if successful.</p>
<p>o relatively non-generic; o does not try to detect io errors</p>
<h2>OPTIONS</h2>
<p>name base input name used to create output filename If name ends in "." a numeric suffix is always added. istart number to start with as a suffix. Default is 1. verbose writes extra messages to stdout. Defaults to .false. </p><h2>RETURNS</h2>
<p>uniq A unique filename that is the same as the NAME input parameter except with a number appended at the end if needed. </p><h2>EXAMPLE</h2>
<pre class="fragment">Sample program

   program demo_uniq
   use M_io, only : uniq
   implicit none
   character(len=4096) :: myname
   integer            :: i
      myname=uniq('does_not_exist')
      open(unit=10,file='does_exist')
      write(*,*)'name stays the same ',trim(myname)
      myname=uniq('does_exist')
      write(*,*)'name has suffix added ',trim(myname)
      do i=1,10
         myname=uniq('does_exist')
         write(*,*) 'FILENAME:',trim(myname)
         open(unit=20+i,file=myname)
      enddo
   end program demo_uniq

Expected output

 name stays the same does_not_exist
 name has suffix added does_exist0001
 FILENAME:does_exist0002
 FILENAME:does_exist0003
 FILENAME:does_exist0004
 FILENAME:does_exist0005
 FILENAME:does_exist0006
 FILENAME:does_exist0007
 FILENAME:does_exist0008
 FILENAME:does_exist0009
 FILENAME:does_exist0010
 FILENAME:does_exist0011
</pre><h2>AUTHOR</h2>
<p>John S. Urban, 1993 </p>

<p class="reference">References <a class="el" href="__false_8f90.html#ac39cd9fe2012c31749944aa6b20b6c05">false()</a>, <a class="el" href="what__overview_81_8txt.html#a447b56c526e8da30e0dc94673727ee25">file()</a>, and <a class="el" href="M__stopwatch_83_8txt.html#a5cbef30eb7c0d734bd82f5a7ebea9aa7">unit()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
