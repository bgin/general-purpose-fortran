<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GeneralPurposeFortran: m_history Module Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GeneralPurposeFortran
   </div>
   <div id="projectbrief">Fortran CLI (Command Line Interfaces)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">m_history Module Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><h2>NAME</h2>
redo(3f) - [M_history] Fortran-based Input History Editor  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:a1abbc2c426b89526939d4389c9d3e391"><td class="memItemLeft" align="right" valign="top"><a class="el" href="M__stopwatch_83_8txt.html#acfbcff50169d691ff02d4a123ed70482">subroutine</a>, <a class="el" href="M__stopwatch_83_8txt.html#a2f74811300c361e53b430611a7d1769f">public</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacem__history.html#a1abbc2c426b89526939d4389c9d3e391">redo</a> (inputline)</td></tr>
<tr class="separator:a1abbc2c426b89526939d4389c9d3e391"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac181d59688bc06d4ba7465841721e766"><td class="memItemLeft" align="right" valign="top"><a class="el" href="M__stopwatch_83_8txt.html#acfbcff50169d691ff02d4a123ed70482">subroutine</a>, private&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacem__history.html#ac181d59688bc06d4ba7465841721e766">open_history</a> (iunit, fname, sname, ierr)</td></tr>
<tr class="separator:ac181d59688bc06d4ba7465841721e766"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a155404b1f975ae6fe778f836c043eeb2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="M__stopwatch_83_8txt.html#acfbcff50169d691ff02d4a123ed70482">subroutine</a>, private&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacem__history.html#a155404b1f975ae6fe778f836c043eeb2">redol</a> (redoline, iobuf, iredo, ibuf0, init)</td></tr>
<tr class="separator:a155404b1f975ae6fe778f836c043eeb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d0830530f10435242fa57853baad282"><td class="memItemLeft" align="right" valign="top"><a class="el" href="M__stopwatch_83_8txt.html#acfbcff50169d691ff02d4a123ed70482">subroutine</a>, private&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacem__history.html#a8d0830530f10435242fa57853baad282">help</a> ()</td></tr>
<tr class="separator:a8d0830530f10435242fa57853baad282"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aca543c267d8b80d0690c33e4a684143b"><td class="memItemLeft" align="right" valign="top">integer, parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacem__history.html#aca543c267d8b80d0690c33e4a684143b">readlen</a> =1024</td></tr>
<tr class="separator:aca543c267d8b80d0690c33e4a684143b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h2>NAME</h2>
<p>redo(3f) - [M_history] Fortran-based Input History Editor </p>
<h2>SYNOPSIS</h2>
<pre class="fragment">subroutine redo(inputline)

  character(len=*) :: inputline
</pre><h2>DESCRIPTION</h2>
<p>the redo(3f) routine lets you recall, list, save, and modify previously entered program input. Built-in help is included.</p>
<p>The redo(3f) input history editor is a simple-to-use input history editor interface modeled on the CDC NOS command REDO. It uses a line editor model that means no special escape characters or control characters are required. Typically, only a few minutes are required to master usage.</p>
<p>When using redo(3f) input lines are usually first read into a character variable and then passed to the routine. The returned string can then be parsed or read from with an internal READ(3f). So, for example, if you have an existing READ(3f) such as</p>
<p>READ(*,101) A,I,K</p>
<p>replace it with something similar to</p>
<p>USE M_HISTORY,ONLY : REDO CHARACTER(LEN=255) :: LINE ! make variable big enough to read a line : : READ(*,'(A)') LINE ! read line into character variable CALL REDO(LINE) ! pass line to REDO(3f). This is a no-op except ! for storing the line into the input history ! unless the input line is the "r" command READ(LINE,101)A,I,K ! read from variable like you did from file</p>
<h2>USAGE</h2>
<p>When prompted for an input line by your program you may at any timeenter "r" on a line by itself, or a line beginning with "r
    r_command" and you will enter the command history edit mode. Now you can recall and edit previous input or compose an input line using the editor commands.</p>
<p>By default, you will be editing the last line you entered, shifted one character to the right by an exclamation character.</p>
<p>The character you respond with in column one controls what happens next.</p>
<p>o If you enter "?" while in command edit mode, help is displayed.</p>
<p>o If the last input line is not the desired line to edit, select the line to edit by entering it's line number or by using the /,l,u, and d commands (see below for details) to find the desired input line. o Next enter an editing directive (c,m) to edit the selected line. The "change" command will change all occurrences of an old string to a new string ...</p>
<p>c/old/new/</p>
<p>o or the "modify" command can be used with the special characters # &amp; and ^ ... o A # under a character will delete a character. o An "&amp;" (ampersand) will cause the character above it to be replaced with a space. o To insert a string enter ^string#. o Otherwise, enter a character under one in the currently displayed command and it will replace it. o hit RETURN to start another edit of the line o Once the change is executed you will be prompted for another edit directive o You will stay in edit mode until you enter a return on a blank line to feed your line to your program; or enter "." or "q" (which means cancel changes and return blank line).</p>
<p>A detailed summary of the main edit-mode commands follows. In the descriptions, N stands for a number ...</p>
<p>LISTING COMMAND HISTORY l|p N list from line N. -N shows N last lines L|P N same as 'l' except no line numbers (for pasting) /string search for simple string in all history lines Note that the buffer set to the last line displayed</p>
<p>POSITIONING TO PREVIOUS COMMANDS u N up through buffer d N down through buffer N load line number</p>
<p>EDITING THE CURRENT BUFFER LINE c/oldstring/newstring/ change all occurrences of old string to new string. Note that s (for substitute) is a synonym for c (for change).</p>
<p>For the "c" directive the second character becomes the delimiter. Traditionally one usually uses a delimiter of / unless the string you are editing contains /.</p>
<p>mmod_string If the first character of your entry is m or blank, o REPLACE a string by entering a replacement character under it o LEAVE a character alone by leaving a space under it o DELETE a character by putting a # character under it o BLANK OUT a character by putting an &amp; under it o INSERT A STRING by entering ^STRING#</p>
<p>The "modify" directive takes a little practice but this single directive accommodates positionally deleting, replacing, and inserting text. it is hardest using "modify" to put the strings "&amp;" and "#" into your lines. to put a # or &amp; character into a string use the 'c' command instead or ^&amp;# or ^##.</p>
<p>;N N N N ... Append specified lines to current line</p>
<p>HELP h|? display help text</p>
<p>SYSTEM COMMANDS !cmd execute system command</p>
<p>DUMPING AND LOADING THE COMMAND HISTORY </p><pre class="fragment">  w FILENAME   write entire command history to specified file
  r FILENAME   replace command history with file contents
  a FILENAME   append lines from file onto command history
</pre><h2>EXAMPLE PROGRAM</h2>
<p>Sample program</p>
<p>program redoit use M_history, only : redo implicit none character(len=1024) :: line integer :: ios integer :: cstat character(len=256) :: sstat write(*,'(a)') &amp; &amp; 'REDO(3f) COMMAND INPUT EDITOR', &amp; 'enter "r" or "r r_command" on the input line to go', &amp; 'into history edit mode. Once in history edit mode you', &amp; 'may enter "?" to get some help. Enter "quit" to exit', &amp; 'the program.' do write(*,'(a)',advance='no')'&gt;-&gt;' ! write prompt read(*,'(a)',iostat=ios) line ! read new input line ! if "r", edit and return a line from the history editor call redo(line) ! store into history if not "r". if(line.eq.'quit')stop ! exit program if user enters "quit" ! now call user code to process new line of data ! As an example, call the system shell using a common f77 extension: call execute_command_line(trim(line),cmdstat=cstat,cmdmsg=sstat) ! f08 equivalent enddo end program redoit</p>
<h2>SAMPLE USAGE</h2>
<pre class="fragment">The example program is basically a loop that reads a command from
standard input and then executes it as a subshell unless the "r"
command is entered.

Now, we will enter an echo(1) command followed by a few other lines
of input. Then we recall the echo(1) command and use a few of the
features of redo(3) to change and then re-execute the command.

   &gt;echo This isss a Test
   This isss a Test
   &gt;date
   Sun May 31 23:54:09 EDT 2009
   &gt;pwd
   /cygdrive/c/urbanjs/MYCYGWIN/DISKA/public_html/public/CLONE/REDO
   &gt;r                            ! enter edit mode
   00001 echo This isss a Test   ! last commands are displayed
   00002 date
   00003 pwd
   !pwd
   &gt;1                            ! go to first line in history
   !echo This isss a Test
                ##   t           ! delete and replace characters
   !echo This is a test          ! insert a string
                   ^new #
   !echo This is a new test
   c/test/TEST/                  ! change a substring
   !echo This is a new TEST
                      &amp;          | replace character with spaces
   !echo This is a newTEST
                                 ! a blank line ends editing
   This is a newTEST
   &gt;quit
</pre><h2>AUTHOR</h2>
<p>John S. Urban, 1988,2009,2011 (last change: Nov 2015) </p>
</div><h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="a8d0830530f10435242fa57853baad282"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d0830530f10435242fa57853baad282">&#9670;&nbsp;</a></span>help()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="M__stopwatch_83_8txt.html#acfbcff50169d691ff02d4a123ed70482">subroutine</a>, private m_history::help </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ac181d59688bc06d4ba7465841721e766"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac181d59688bc06d4ba7465841721e766">&#9670;&nbsp;</a></span>open_history()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="M__stopwatch_83_8txt.html#acfbcff50169d691ff02d4a123ed70482">subroutine</a>, private m_history::open_history </td>
          <td>(</td>
          <td class="paramtype">integer, intent(<a class="el" href="M__journal_83_8txt.html#afce72651d1eed785a2132bee863b2f38">in</a>)&#160;</td>
          <td class="paramname"><em>iunit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="option__stopwatch_83_8txt.html#abd4b21fbbd175834027b5224bfe97e66">character</a>(len=*), intent(<a class="el" href="M__journal_83_8txt.html#afce72651d1eed785a2132bee863b2f38">in</a>)&#160;</td>
          <td class="paramname"><em>fname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="option__stopwatch_83_8txt.html#abd4b21fbbd175834027b5224bfe97e66">character</a>(len=*), intent(<a class="el" href="M__journal_83_8txt.html#afce72651d1eed785a2132bee863b2f38">in</a>)&#160;</td>
          <td class="paramname"><em>sname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>ierr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">References <a class="el" href="what__overview_81_8txt.html#a447b56c526e8da30e0dc94673727ee25">file()</a>, <a class="el" href="print__watch_83_8txt.html#a8fdbaaece3b2ad2ab6982e68e7539f04">form</a>, <a class="el" href="namespacem__history.html#aca543c267d8b80d0690c33e4a684143b">readlen</a>, and <a class="el" href="M__stopwatch_83_8txt.html#a5cbef30eb7c0d734bd82f5a7ebea9aa7">unit()</a>.</p>

</div>
</div>
<a id="a1abbc2c426b89526939d4389c9d3e391"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1abbc2c426b89526939d4389c9d3e391">&#9670;&nbsp;</a></span>redo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="M__stopwatch_83_8txt.html#acfbcff50169d691ff02d4a123ed70482">subroutine</a>, <a class="el" href="M__stopwatch_83_8txt.html#a2f74811300c361e53b430611a7d1769f">public</a> m_history::redo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="option__stopwatch_83_8txt.html#abd4b21fbbd175834027b5224bfe97e66">character</a>(len=*), intent(inout)&#160;</td>
          <td class="paramname"><em>inputline</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">References <a class="el" href="namespacem__history.html#ac181d59688bc06d4ba7465841721e766">open_history()</a>, <a class="el" href="namespacem__history.html#aca543c267d8b80d0690c33e4a684143b">readlen</a>, <a class="el" href="namespacem__history.html#a155404b1f975ae6fe778f836c043eeb2">redol()</a>, and <a class="el" href="__true_8f90.html#a7ed1d79677aed1b23489a4fe0bd16daa">true()</a>.</p>

</div>
</div>
<a id="a155404b1f975ae6fe778f836c043eeb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a155404b1f975ae6fe778f836c043eeb2">&#9670;&nbsp;</a></span>redol()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="M__stopwatch_83_8txt.html#acfbcff50169d691ff02d4a123ed70482">subroutine</a>, private m_history::redol </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="option__stopwatch_83_8txt.html#abd4b21fbbd175834027b5224bfe97e66">character</a>(len=*), intent(out)&#160;</td>
          <td class="paramname"><em>redoline</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(<a class="el" href="M__journal_83_8txt.html#afce72651d1eed785a2132bee863b2f38">in</a>)&#160;</td>
          <td class="paramname"><em>iobuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer&#160;</td>
          <td class="paramname"><em>iredo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(<a class="el" href="M__journal_83_8txt.html#afce72651d1eed785a2132bee863b2f38">in</a>)&#160;</td>
          <td class="paramname"><em>ibuf0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="option__stopwatch_83_8txt.html#abd4b21fbbd175834027b5224bfe97e66">character</a>(len=*), intent(<a class="el" href="M__journal_83_8txt.html#afce72651d1eed785a2132bee863b2f38">in</a>)&#160;</td>
          <td class="paramname"><em>init</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">References <a class="el" href="namespacem__strings.html#a1222f3b718f7637105bde330367925e1">m_strings::change()</a>, <a class="el" href="what__overview_81_8txt.html#a447b56c526e8da30e0dc94673727ee25">file()</a>, <a class="el" href="namespacem__history.html#a8d0830530f10435242fa57853baad282">help()</a>, <a class="el" href="namespacem__strings.html#aec887410b018916a683fbb2ae529f8c5">m_strings::modif()</a>, <a class="el" href="namespacem__strings.html#a3bf44ac06a670f55830e17a6f1108b9c">m_strings::notabs()</a>, <a class="el" href="namespacem__strings.html#a7b153720f1f9b93c49094dcb1272995b">m_strings::s2v()</a>, <a class="el" href="namespacem__strings.html#ad7fffe79559a666aa28e1ed598b8670f">m_strings::s2vs()</a>, and <a class="el" href="M__stopwatch_83_8txt.html#a5cbef30eb7c0d734bd82f5a7ebea9aa7">unit()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aca543c267d8b80d0690c33e4a684143b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca543c267d8b80d0690c33e4a684143b">&#9670;&nbsp;</a></span>readlen</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, parameter m_history::readlen =1024</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
